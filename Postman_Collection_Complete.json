{
  "info": {
    "name": "Backend API - Complete Collection (All 150+ Endpoints)",
    "description": "Complete API collection with all endpoints organized by 17 modules. Use environment variables for easy testing.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "backend-api-complete"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-set authorization header if token exists",
          "const token = pm.environment.get('accessToken');",
          "if (token) {",
          "    pm.request.headers.add({",
          "        key: 'Authorization',",
          "        value: 'Bearer ' + token",
          "    });",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api/v1",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "projectId",
      "value": "",
      "type": "string"
    },
    {
      "key": "projectSlug",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. Health Check",
      "description": "Health check endpoint for development",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Check if the API is running"
          },
          "response": []
        }
      ]
    },
    {
      "name": "2. Authentication & Users",
      "description": "User authentication, registration, and management - 24 endpoints",
      "item": [
        {
          "name": "Auth Flow",
          "item": [
            {
              "name": "Register User",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201 || pm.response.code === 200) {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.token) pm.environment.set('accessToken', jsonData.token);",
                      "    if (jsonData.user && jsonData.user.uid) pm.environment.set('userId', jsonData.user.uid);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"testuser{{$randomInt}}\",\n  \"fullName\": \"Test User\",\n  \"email\": \"test{{$randomInt}}@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"phone\": \"+12345{{$randomInt}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/register",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "register"]
                }
              }
            },
            {
              "name": "Send OTP",
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"test@example.com\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/sendOTP",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "sendOTP"]
                }
              }
            },
            {
              "name": "Verify Email",
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"test@example.com\",\n  \"otp\": \"123456\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/verifyEmail",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "verifyEmail"]
                }
              }
            },
            {
              "name": "Login User",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    var jsonData = pm.response.json();",
                      "    if (jsonData.accessToken) pm.environment.set('accessToken', jsonData.accessToken);",
                      "    if (jsonData.refreshToken) pm.environment.set('refreshToken', jsonData.refreshToken);",
                      "    if (jsonData.user && jsonData.user.uid) pm.environment.set('userId', jsonData.user.uid);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "login"]
                },
                "description": "Login and auto-save tokens"
              }
            },
            {
              "name": "Refresh Access Token",
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/refreshAcessToken",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "refreshAcessToken"]
                }
              }
            },
            {
              "name": "Logout User",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/logoutUser",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "logoutUser"]
                }
              }
            },
            {
              "name": "Logout User Forcefully",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/logoutUserForceFully",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "logoutUserForceFully"]
                },
                "description": "Logout from all devices"
              }
            }
          ]
        },
        {
          "name": "User Management",
          "item": [
            {
              "name": "Get Current User",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/getCurrentUser",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "getCurrentUser"]
                }
              }
            },
            {
              "name": "Get Single User",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/getSingleUser?userId={{userId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "getSingleUser"],
                  "query": [{ "key": "userId", "value": "{{userId}}" }]
                }
              }
            },
            {
              "name": "Get All Users",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/getAllUsers",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "getAllUsers"]
                },
                "description": "Admin/Moderator only"
              }
            },
            {
              "name": "Search Users",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/searchUsers?search=test",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "searchUsers"],
                  "query": [{ "key": "search", "value": "test" }]
                }
              }
            },
            {
              "name": "Get All Clients",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/getAllClients",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "getAllClients"]
                }
              }
            }
          ]
        },
        {
          "name": "Profile Updates",
          "item": [
            {
              "name": "Update User Info",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"fullName\": \"Updated Name\",\n  \"address\": \"123 Main St\",\n  \"detail\": \"Some details about me\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/updateInfo",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "updateInfo"]
                }
              }
            },
            {
              "name": "Update Email",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"newEmail\": \"newemail@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/updateEmail",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "updateEmail"]
                }
              }
            },
            {
              "name": "Update Password",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"oldPassword\": \"SecurePass123!\",\n  \"newPassword\": \"NewSecurePass123!\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/updatePassword",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "updatePassword"]
                }
              }
            },
            {
              "name": "Update Role",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"role\": \"FREELANCER\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/updateRole",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "updateRole"]
                },
                "description": "Roles: CLIENT, ADMIN, MODERATOR, FREELANCER"
              }
            }
          ]
        },
        {
          "name": "Password Recovery",
          "item": [
            {
              "name": "Forgot Password Request",
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"test@example.com\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/forgotPasswordRequestFromUser",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "forgotPasswordRequestFromUser"]
                }
              }
            },
            {
              "name": "Verify Forgot Password Request",
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"test@example.com\",\n  \"otp\": \"123456\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/verifyForgotPasswordRequest",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "verifyForgotPasswordRequest"]
                }
              }
            },
            {
              "name": "Update New Password",
              "request": {
                "auth": { "type": "noauth" },
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"test@example.com\",\n  \"newPassword\": \"NewSecurePass123!\",\n  \"token\": \"reset_token_here\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/updateNewPasswordRequest",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "updateNewPasswordRequest"]
                }
              }
            }
          ]
        },
        {
          "name": "User Deletion",
          "item": [
            {
              "name": "Trash User",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/trashTheUser",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "trashTheUser"]
                },
                "description": "Soft delete - Admin/Moderator"
              }
            },
            {
              "name": "Untrash User",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/auth/unTrashTheUser",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "unTrashTheUser"]
                },
                "description": "Restore - Admin only"
              }
            },
            {
              "name": "Delete User Permanently",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/deleteUser/{{userId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["auth", "deleteUser", "{{userId}}"]
                },
                "description": "Permanent delete - Admin only"
              }
            }
          ]
        }
      ]
    }
  ]
}
